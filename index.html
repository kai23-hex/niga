<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>L·ªùi Ch√∫c T·ª´ Cyrene</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Quicksand:wght@400;600;700;900&subset=vietnamese&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        /* --- KHAI B√ÅO BI·∫æN M√ÄU --- */
        :root {
            --main-bg-gradient: linear-gradient(135deg, #ffdee9 0%, #b5fffc 100%);
            --gold-border: #d4af37;
        }

        /* --- 1. C·∫§U H√åNH CHUNG --- */
        * { box-sizing: border-box; }
        body {
            margin: 0; padding: 0;
            width: 100vw; height: 100vh;
            background: var(--main-bg-gradient);
            font-family: 'Quicksand', sans-serif;
            display: flex; justify-content: center; align-items: center;
            overflow: hidden; position: relative;
            perspective: 1000px;
            touch-action: none;
            -webkit-user-select: none; user-select: none;
        }

        /* --- 2. HI·ªÜU ·ª®NG SAO BƒÇNG --- */
        .sky-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 0; pointer-events: none; transform: rotateZ(45deg); }
        .shooting_star { position: absolute; left: 50%; top: 50%; height: 2px; background: linear-gradient(-45deg, #5f91ff, rgba(0, 0, 255, 0)); border-radius: 999px; filter: drop-shadow(0 0 6px #699bff); animation: tail 3000ms ease-in-out infinite, shooting 3000ms ease-in-out infinite; }
        .shooting_star::before, .shooting_star::after { content: ''; position: absolute; top: calc(50% - 1px); right: 0; height: 2px; background: linear-gradient(-45deg, rgba(0, 0, 255, 0), #5f91ff, rgba(0, 0, 255, 0)); transform: translateX(50%) rotateZ(45deg); border-radius: 100%; animation: shining 3000ms ease-in-out infinite; }
        .shooting_star::after { transform: translateX(50%) rotateZ(-45deg); }
        @keyframes tail { 0% { width: 0; } 30% { width: 100px; } 100% { width: 0; } }
        @keyframes shooting { 0% { transform: translateX(0); } 100% { transform: translateX(300px); } }
        @keyframes shining { 0% { width: 0; } 50% { width: 30px; } 100% { width: 0; } }
        .shooting_star:nth-child(1) { top: 0; left: 0; animation-delay: 0ms; } .shooting_star:nth-child(2) { top: 0; left: 50%; animation-delay: 2000ms; }
        .shooting_star:nth-child(3) { top: 50%; left: 0; animation-delay: 4000ms; } .shooting_star:nth-child(4) { top: 50%; left: 50%; animation-delay: 6000ms; }

        /* --- 3. M√ÄN H√åNH CH·ªú --- */
        #start-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); z-index: 99999 !important; display: flex; justify-content: center; align-items: center; flex-direction: column; color: white; transition: opacity 0.5s; backdrop-filter: blur(5px); pointer-events: auto; }
        .start-btn { margin-top: 20px; padding: 15px 40px; border-radius: 50px; background: var(--main-bg-gradient); color: #57606f; border: none; font-size: 1.2em; font-weight: bold; animation: pulse 2s infinite; cursor: pointer; box-shadow: 0 0 20px rgba(255, 255, 255, 0.4); }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }

        /* --- 4. TH·∫∫ B√ÄI --- */
        .memory-card {
            background: rgba(0, 0, 0, 0.25); /* N·ªÅn t·ªëi nh·∫π nh∆∞ y√™u c·∫ßu tr∆∞·ªõc */
            backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px);
            border: 6px double var(--gold-border); 
            border-radius: 35px;
            padding: 30px 20px;
            text-align: center;
            width: 85vw; max-width: 400px;
            z-index: 10; 
            position: relative;
            top: -40px;
            transform-style: preserve-3d; transition: transform 0.1s ease-out;
            box-shadow: 0 25px 50px rgba(0,0,0,0.3);
            animation: cardGlow 4s infinite alternate;
        }

        .memory-card::before {
            content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            border-radius: 30px;
            background: rgba(0, 0, 0, 0.3);
            transform: translateZ(-10px);
            box-shadow: 0 30px 40px rgba(0,0,0,0.4);
        }

        .shine-layer {
            position: absolute; top: 0; left: -150%; width: 100%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            transform: skewX(-25deg); pointer-events: none; transition: 0s;
            mix-blend-mode: overlay;
        }

        @keyframes cardGlow {
            0% { border-color: var(--gold-border); box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2); }
            100% { border-color: #f1c40f; box-shadow: 0 25px 50px rgba(0, 0, 0, 0.4); }
        }

        /* --- 5. N·ªòI DUNG --- */
        .avatar-frame {
            width: 120px; height: 120px; margin: 0 auto 15px;
            padding: 5px; border-radius: 50%;
            background: linear-gradient(45deg, var(--gold-border), #f1c40f);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transform: translateZ(30px);
        }
        .avatar { width: 100%; height: 100%; border-radius: 50%; object-fit: cover; border: 3px solid #fff; }

        h1 {
            font-family: 'Dancing Script', cursive;
            background: var(--main-bg-gradient);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            background-clip: text; color: transparent;
            font-size: 2.5em; margin: 10px 0;
            transform: translateZ(40px);
            filter: drop-shadow(0 2px 2px rgba(0,0,0,0.3));
        }

        p { 
            color: #ffffff; font-size: 1.1em; line-height: 1.6; 
            transform: translateZ(25px); font-weight: 700;
            text-shadow: 0 1px 3px rgba(0,0,0,0.5);
        }

        /* --- ƒê·ªíNG H·ªí ƒê·∫æM NG∆Ø·ª¢C --- */
        .countdown-container { display: flex; justify-content: center; gap: 10px; margin: 20px 0; transform: translateZ(35px); }
        .time-bubble {
            background: rgba(255, 255, 255, 0.95);
            width: 55px; height: 65px; border-radius: 15px;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2); border: 2px solid var(--gold-border);
            animation: floatBubble 3s ease-in-out infinite;
        }
        
        /* S·ªê: QUAY L·∫†I M√ÄU TRONG SU·ªêT (GRADIENT) NH∆ØNG V·∫™N ƒê·∫¨M */
        .time-bubble span { 
            font-weight: 900; /* V·∫´n gi·ªØ ƒë·ªô ƒë·∫≠m Max */
            font-size: 1.6em; 
            /* Hi·ªáu ·ª©ng trong su·ªët m√†u n·ªÅn */
            background: var(--main-bg-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            color: transparent;
            /* Th√™m b√≥ng nh·∫π ƒë·ªÉ t√°ch kh·ªèi n·ªÅn tr·∫Øng */
            filter: drop-shadow(0 1px 1px rgba(0,0,0,0.15));
        }
        
        .time-bubble small { font-size: 0.7em; color: #7f8c8d; margin-top: 3px; font-weight: 600; }
        
        .time-bubble:nth-child(1) { animation-delay: 0s; } .time-bubble:nth-child(2) { animation-delay: 0.5s; }
        .time-bubble:nth-child(3) { animation-delay: 1s; } .time-bubble:nth-child(4) { animation-delay: 1.5s; }
        @keyframes floatBubble { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-6px); } }

        .btn-reveal {
            background: var(--main-bg-gradient);
            color: #4a5568; border: none;
            padding: 12px 35px; border-radius: 50px;
            font-size: 1.1em; font-weight: bold; cursor: pointer;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transition: transform 0.3s; display: none; font-family: 'Quicksand', sans-serif;
            transform: translateZ(50px);
        }
        .btn-reveal:active { transform: scale(0.95) translateZ(50px); }
        
        #gift-area { display: none; margin-top: 20px; animation: fadeIn 1s; transform: translateZ(30px); }
        #gift-area p:first-child {
            background: var(--main-bg-gradient); -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            font-weight: bold; font-size: 1.2em;
        }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

    </style>
</head>
<body>

    <div id="start-overlay">
        <h2 style="font-family: 'Dancing Script'; font-size: 2.5em; text-align: center;">B·∫°n c√≥ m·ªôt m√≥n qu√†! üéÅ</h2>
        <p style="margin-top:0;">ƒêeo tai nghe ƒë·ªÉ tr·∫£i nghi·ªám t·ªët nh·∫•t</p>
        <button class="start-btn" onclick="startExperience()">Ch·∫°m ƒë·ªÉ m·ªü ‚ú®</button>
    </div>

    <div class="sky-container">
        <div class="shooting_star"></div><div class="shooting_star"></div>
        <div class="shooting_star"></div><div class="shooting_star"></div>
    </div>

    <div class="memory-card" id="card3d">
        <div class="shine-layer" id="shine"></div>
        
        <div class="avatar-frame">
            <img src="https://i.postimg.cc/rs4WbSWp/33.jpg" alt="Avatar" class="avatar">
        </div>

        <h1 id="title-text">Ch·ªù ƒê·ª£i Kho·∫£nh Kh·∫Øc...</h1>

        <p id="msg-text">
            "Nh·ªØng k√Ω ·ª©c ƒë·∫πp nh·∫•t ƒëang ƒë∆∞·ª£c k·∫øt tinh.<br>
            H√£y ki√™n nh·∫´n th√™m m·ªôt ch√∫t n·ªØa nh√©, Ch·ªã H·∫≠u..."
        </p>

        <div class="countdown-container" id="countdown">
            <div class="time-bubble"><span id="d">00</span><small>Ng√†y</small></div>
            <div class="time-bubble"><span id="h">00</span><small>Gi·ªù</small></div>
            <div class="time-bubble"><span id="m">00</span><small>Ph√∫t</small></div>
            <div class="time-bubble"><span id="s">00</span><small>Gi√¢y</small></div>
        </div>

        <button class="btn-reveal" id="btn-gift" onclick="openMemory()">‚ú¶ Thu Th·∫≠p K√Ω ·ª®c ‚ú¶</button>

        <div id="gift-area">
            <p>ƒê√£ l∆∞u v√†o V√πng ƒê·∫•t K√Ω ·ª®c:</p>
            üå∏ 1x L·ªùi Ch√∫c Vƒ©nh C·ª≠u<br>
            üíé 1x Pha L√™ H·∫°nh Ph√∫c<br>
            <small style="color: white;">(Lu√¥n m·ªâm c∆∞·ªùi nh√©! ‚ô™)</small>
        </div>
    </div>

    <audio id="bgMusic" loop>
        <source src="nhac.mp3" type="audio/mpeg">
    </audio>

    <script>
        document.body.addEventListener('touchmove', function(e) { e.preventDefault(); }, { passive: false });
        const card = document.querySelector(".memory-card");
        const shine = document.querySelector(".shine-layer");
        const bgMusic = document.getElementById("bgMusic");

        window.onload = function() {
            var overlay = document.getElementById('start-overlay');
            if (overlay) { overlay.style.display = 'flex'; overlay.style.opacity = '1'; }
        };

        function startExperience() {
            document.getElementById('start-overlay').style.opacity = '0';
            setTimeout(() => { document.getElementById('start-overlay').style.display = 'none'; }, 500);
            if(bgMusic) { bgMusic.volume = 0.4; bgMusic.play().catch(e => console.log(e)); }
            if (typeof DeviceOrientationEvent !== 'undefined' && typeof DeviceOrientationEvent.requestPermission === 'function') {
                DeviceOrientationEvent.requestPermission().then(p => { if (p === 'granted') window.addEventListener('deviceorientation', handleOrientation); }).catch(console.error);
            } else { window.addEventListener('deviceorientation', handleOrientation); }
        }

        // --- TƒÇNG G√ìC NGHI√äNG (TILT) L√äN 35 ƒê·ªò ---
        function handleOrientation(event) {
            let x = event.beta; let y = event.gamma; if (x === null || y === null) return;

            // K·∫πp g√≥c quay Max 35 ƒë·ªô (TƒÉng ƒë·ªô nghi√™ng)
            if (x > 35) x = 35; if (x < -35) x = -35;
            if (y > 35) y = 35; if (y < -35) y = -35;

            card.style.transform = `rotateX(${-x}deg) rotateY(${y}deg)`;
            let shadowX = -y * 0.5; let shadowY = x * 0.5;
            card.style.boxShadow = `${shadowX}px ${shadowY + 15}px 35px rgba(0,0,0,0.3)`;
            if(shine) shine.style.left = (-150 + (y * 3)) + '%';
        }

        document.addEventListener("touchmove", (e) => {
            if (window.innerWidth > 800) return; 
            let touch = e.touches[0];
            let xRaw = (window.innerWidth / 2 - touch.pageX) / 20; 
            let yRaw = (window.innerHeight / 2 - touch.pageY) / 20;

            // TƒÉng g√≥c nghi√™ng khi vu·ªët tay l√™n 35 ƒë·ªô
            let xAxis = Math.max(-35, Math.min(35, xRaw)); 
            let yAxis = Math.max(-35, Math.min(35, yRaw));

            card.style.transform = `rotateY(${xAxis}deg) rotateX(${yAxis}deg)`;
        }, { passive: false });

        document.addEventListener("touchend", () => {
            card.style.transition = "transform 0.5s ease";
            card.style.transform = `rotateY(0deg) rotateX(0deg)`;
            setTimeout(() => { card.style.transition = "transform 0.1s ease-out"; }, 500);
        });

        document.addEventListener("mousemove", (e) => {
            if(window.innerWidth < 800) return;
            let xAxis = (window.innerWidth / 2 - e.pageX) / 25;
            let yAxis = (window.innerHeight / 2 - e.pageY) / 25;
            card.style.transform = `rotateY(${xAxis}deg) rotateX(${yAxis}deg)`;
            if(shine) shine.style.left = (150 - (xAxis * 5)) + '%';
        });

        const birthdayTime = new Date("December 24, 2025 11:00:00").getTime();
        const timer = setInterval(function() {
            const now = new Date().getTime(); const distance = birthdayTime - now;
            const d = Math.floor(distance / (1000 * 60 * 60 * 24));
            const h = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const m = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const s = Math.floor((distance % (1000 * 60)) / 1000);
            if(document.getElementById("d")) {
                document.getElementById("d").innerText = d < 10 ? "0"+d : d; document.getElementById("h").innerText = h < 10 ? "0"+h : h;
                document.getElementById("m").innerText = m < 10 ? "0"+m : m; document.getElementById("s").innerText = s < 10 ? "0"+s : s;
            }
            if (distance < 0) {
                clearInterval(timer); document.getElementById("countdown").style.display = "none";
                const title = document.getElementById("title-text"); 
                title.innerText = "Ch√∫c M·ª´ng Sinh Nh·∫≠t!"; title.style.fontSize = "3em";
                title.style.background = "var(--main-bg-gradient)";
                title.style.webkitBackgroundClip = "text";
                title.style.webkitTextFillColor = "transparent";

                const msg = document.getElementById("msg-text"); msg.innerHTML = "Th·ªùi gian tr√¥i ƒëi nh∆∞ nh·ªØng c√°nh hoa r∆°i, nh∆∞ng nh·ªØng k√Ω ·ª©c ƒë·∫πp v·ªÅ ch·ªã th√¨ s·∫Ω lu√¥n ng∆∞ng ƒë·ªçng m√£i.<br>Sinh nh·∫≠t vui v·∫ª nh√©!";
                document.getElementById("btn-gift").style.display = "inline-block";
                launchFireworks();
            }
        }, 1000);

        function launchFireworks() {
            var duration = 15 * 1000; var end = Date.now() + duration;
            var defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 0 };
            function randomInRange(min, max) { return Math.random() * (max - min) + min; }
            var interval = setInterval(function() {
                var timeLeft = end - Date.now(); if (timeLeft <= 0) return clearInterval(interval);
                var particleCount = 50 * (timeLeft / duration);
                confetti(Object.assign({}, defaults, { particleCount, origin: { x: randomInRange(0.1, 0.3), y: Math.random() - 0.2 }, colors: ['#ffdee9', '#b5fffc', '#ffffff'] }));
                confetti(Object.assign({}, defaults, { particleCount, origin: { x: randomInRange(0.7, 0.9), y: Math.random() - 0.2 }, colors: ['#ffdee9', '#b5fffc', '#ffffff'] }));
            }, 250);
        }

        function openMemory() {
            var colors = ['#ffdee9', '#b5fffc', '#ffffff'];
            (function frame() {
                confetti({ particleCount: 5, angle: 60, spread: 55, origin: { x: 0 }, colors: colors });
                confetti({ particleCount: 5, angle: 120, spread: 55, origin: { x: 1 }, colors: colors });
                if (Date.now() < (Date.now() + 2000)) { requestAnimationFrame(frame); }
            }());
            document.getElementById("gift-area").style.display = "block";
            var btn = document.getElementById("btn-gift"); btn.innerText = "ƒê√£ L∆∞u! ‚ù§Ô∏è";
            if(bgMusic.paused) bgMusic.play();
        }
    </script>
</body>
</html>
